define("willkan/foundation/4.3.1/foundation/foundation.forms",["willkan/foundation/4.3.1/foundation/foundation","$"],function(a){var b=window.Foundation||a("willkan/foundation/4.3.1/foundation/foundation");!function(a,c,d,e){"use strict";b.libs.forms={name:"forms",version:"4.3.1",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(b,c,d){return"object"==typeof c&&a.extend(!0,this.settings,c),"string"!=typeof c?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[c].call(this,d)},assemble:function(){a('form.custom input[type="radio"]',a(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),a('form.custom input[type="checkbox"]',a(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),a("form.custom select",a(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var e=this;a(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(b){b.preventDefault(),b.stopPropagation(),e.toggle_checkbox(a(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(b){b.preventDefault(),b.stopPropagation(),e.toggle_radio(a(this))}).on("change.fndtn.forms","form.custom select",function(b,c){a(this).is('[data-customforms="disabled"]')||e.refresh_custom_select(a(this),c)}).on("click.fndtn.forms","form.custom label",function(b){if(a(b.target).is("label")){var c,d,f=a("#"+e.escape(a(this).attr("for"))).not('[data-customforms="disabled"]');0!==f.length&&("checkbox"===f.attr("type")?(b.preventDefault(),c=a(this).find("span.custom.checkbox"),0===c.length&&(c=f.add(this).siblings("span.custom.checkbox").first()),e.toggle_checkbox(c)):"radio"===f.attr("type")&&(b.preventDefault(),d=a(this).find("span.custom.radio"),0===d.length&&(d=f.add(this).siblings("span.custom.radio").first()),e.toggle_radio(d)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(b){var c=a(this),d=c.closest("div.custom.dropdown"),g=f(d,"select");return d.hasClass("open")||a(e.scope).trigger("click"),b.preventDefault(),!1===g.is(":disabled")?(d.toggleClass("open"),d.hasClass("open")?a(e.scope).on("click.fndtn.forms.customdropdown",function(){d.removeClass("open"),a(e.scope).off(".fndtn.forms.customdropdown")}):a(e.scope).on(".fndtn.forms.customdropdown"),!1):void 0}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(b){var c=a(this),e=c.closest("div.custom.dropdown"),g=f(e,"select"),h=0;if(b.preventDefault(),b.stopPropagation(),!a(this).hasClass("disabled")){a("div.dropdown").not(e).removeClass("open");var i=c.closest("ul").find("li.selected");if(i.removeClass("selected"),c.addClass("selected"),e.removeClass("open").find("a.current").text(c.text()),c.closest("ul").find("li").each(function(a){c[0]===this&&(h=a)}),g[0].selectedIndex=h,g.data("prevalue",i.html()),"undefined"!=typeof d.createEvent){var j=d.createEvent("HTMLEvents");j.initEvent("change",!0,!0),g[0].dispatchEvent(j)}else g[0].fireEvent("onchange")}}),a(c).on("keydown",function(c){var e=(d.activeElement,b.libs.forms),f=a(".custom.dropdown.open");if(f.length>0){if(c.preventDefault(),13===c.which&&f.find("li.selected").trigger("click"),27===c.which&&f.removeClass("open"),c.which>=65&&c.which<=90){var g=e.go_to(f,c.which),h=f.find("li.selected");g&&(h.removeClass("selected"),e.scrollTo(g.addClass("selected"),300))}if(38===c.which){var h=f.find("li.selected"),i=h.prev(":not(.disabled)");i.length>0&&(i.parent()[0].scrollTop=i.parent().scrollTop()-e.outerHeight(i),h.removeClass("selected"),i.addClass("selected"))}else if(40===c.which){var h=f.find("li.selected"),g=h.next(":not(.disabled)");g.length>0&&(g.parent()[0].scrollTop=g.parent().scrollTop()+e.outerHeight(g),h.removeClass("selected"),g.addClass("selected"))}}}),this.settings.init=!0},go_to:function(a,b){var c=a.find("li"),d=c.length;if(d>0)for(var e=0;d>e;e++){var f=c.eq(e).text().charAt(0).toLowerCase();if(f===String.fromCharCode(b).toLowerCase())return c.eq(e)}},scrollTo:function(a,b){if(!(0>b)){var c=a.parent(),d=this.outerHeight(a),e=d*a.index()-c.scrollTop(),f=10*(e/b);this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(f,10))||(c[0].scrollTop=c.scrollTop()+f,this.scrollTo(a,b-10))}.bind(this),10)}},append_custom_markup:function(b,c){var d=a(c),e=d.attr("type"),f=d.next("span.custom."+e);d.parent().hasClass("switch")||d.addClass("hidden-field"),0===f.length&&(f=a('<span class="custom '+e+'"></span>').insertAfter(d)),f.toggleClass("checked",d.is(":checked")),f.toggleClass("disabled",d.is(":disabled"))},append_custom_select:function(c,d){var e,f=b.libs.forms,g=a(d),h=g.next("div.custom.dropdown"),i=h.find("ul"),j=(h.find(".current"),h.find(".selector")),k=g.find("option"),l=k.filter(":selected"),m=g.attr("class")?g.attr("class").split(" "):[],n=0,o="",p=!1;if(0===h.length){var q=g.hasClass("small")?"small":g.hasClass("medium")?"medium":g.hasClass("large")?"large":g.hasClass("expand")?"expand":"";h=a('<div class="'+["custom","dropdown",q].concat(m).filter(function(a,b,c){return""===a?!1:c.indexOf(a)===b}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),j=h.find(".selector"),i=h.find("ul"),o=k.map(function(){var b=a(this).attr("class")?a(this).attr("class"):"";return"<li class='"+b+"'>"+a(this).html()+"</li>"}).get().join(""),i.append(o),p=h.prepend('<a href="#" class="current">'+l.html()+"</a>").find(".current"),g.after(h).addClass("hidden-field")}else o=k.map(function(){return"<li>"+a(this).html()+"</li>"}).get().join(""),i.html("").append(o);if(f.assign_id(g,h),h.toggleClass("disabled",g.is(":disabled")),e=i.find("li"),f.cache[h.data("id")]=e.length,k.each(function(b){this.selected&&(e.eq(b).addClass("selected"),p&&p.html(a(this).html())),a(this).is(":disabled")&&e.eq(b).addClass("disabled")}),!h.is(".small, .medium, .large, .expand")){h.addClass("open");var f=b.libs.forms;f.hidden_fix.adjust(i),n=f.outerWidth(e)>n?f.outerWidth(e):n,b.libs.forms.hidden_fix.reset(),h.removeClass("open")}},assign_id:function(a,c){var d=[+new Date,b.random_str(5)].join("-");a.attr("data-id",d),c.attr("data-id",d)},refresh_custom_select:function(b,c){var d=this,e=0,f=b.next(),g=b.find("option"),h=f.find("li");(h.length!==this.cache[f.data("id")]||c)&&(f.find("ul").html(""),g.each(function(){var b=a("<li>"+a(this).html()+"</li>");f.find("ul").append(b)}),g.each(function(b){this.selected&&(f.find("li").eq(b).addClass("selected"),f.find(".current").html(a(this).html())),a(this).is(":disabled")&&f.find("li").eq(b).addClass("disabled")}),f.removeAttr("style").find("ul").removeAttr("style"),f.find("li").each(function(){f.addClass("open"),d.outerWidth(a(this))>e&&(e=d.outerWidth(a(this))),f.removeClass("open")}),h=f.find("li"),this.cache[f.data("id")]=h.length)},toggle_checkbox:function(a){var b=a.prev(),c=b[0];!1===b.is(":disabled")&&(c.checked=c.checked?!1:!0,a.toggleClass("checked"),b.trigger("change"))},toggle_radio:function(a){var b=a.prev(),c=b.closest("form.custom"),d=b[0];!1===b.is(":disabled")&&(c.find('input[type="radio"][name="'+this.escape(b.attr("name"))+'"]').next().not(a).removeClass("checked"),a.hasClass("checked")||a.toggleClass("checked"),d.checked=a.hasClass("checked"),b.trigger("change"))},escape:function(a){return a?a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(b){var c=this;c.hidden=b.parents(),c.hidden=c.hidden.add(b).filter(":hidden"),c.hidden.each(function(){var b=a(this);c.tmp.push(b.attr("style")),b.css({visibility:"hidden",display:"block"})})},reset:function(){var b=this;b.hidden.each(function(c){var d=a(this),f=b.tmp[c];f===e?d.removeAttr("style"):d.attr("style",f)}),b.tmp=[],b.hidden=null}},off:function(){a(this.scope).off(".fndtn.forms")},reflow:function(){}};var f=function(b,c){for(var b=b.prev();b.length;){if(b.is(c))return b;b=b.prev()}return a()}}(b.zj,this,this.document)});
