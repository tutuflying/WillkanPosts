define("willkan/foundation/4.3.1/foundation/foundation.topbar",["willkan/foundation/4.3.1/foundation/foundation","$"],function(a){var b=window.Foundation||a("willkan/foundation/4.3.1/foundation/foundation");!function(a,c,d){"use strict";b.libs.topbar={name:"topbar",version:"4.3.1",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!0,scrolltop:!0,init:!1},init:function(d,e,f){b.inherit(this,"data_options");var g=this;return"object"==typeof e?a.extend(!0,this.settings,e):"undefined"!=typeof f&&a.extend(!0,this.settings,f),"string"!=typeof e?(a(".top-bar, [data-topbar]").each(function(){a.extend(!0,g.settings,g.data_options(a(this))),g.settings.$w=a(c),g.settings.$topbar=a(this),g.settings.$section=g.settings.$topbar.find("section"),g.settings.$titlebar=g.settings.$topbar.children("ul").first(),g.settings.$topbar.data("index",0);var b=a("<div class='top-bar-js-breakpoint'/>").insertAfter(g.settings.$topbar);g.settings.breakPoint=b.width(),b.remove(),g.assemble(),g.settings.is_hover&&g.settings.$topbar.find(".has-dropdown").addClass("not-click"),g.settings.$topbar.parent().hasClass("fixed")&&a("body").css("padding-top",g.outerHeight(g.settings.$topbar))}),g.settings.init||this.events(),this.settings.init):this[e].call(this,f)},timer:null,events:function(){var b=this,d=this.outerHeight(a(".top-bar, [data-topbar]"));a(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(e){var f=a(this).closest(".top-bar, [data-topbar]"),g=f.find("section, .section");f.children("ul").first(),e.preventDefault(),b.breakpoint()&&(b.rtl?(g.css({right:"0%"}),g.find(">.name").css({right:"100%"})):(g.css({left:"0%"}),g.find(">.name").css({left:"100%"})),g.find("li.moved").removeClass("moved"),f.data("index",0),f.toggleClass("expanded").css("height","")),f.hasClass("expanded")?f.parent().hasClass("fixed")&&(f.parent().removeClass("fixed"),f.addClass("fixed"),a("body").css("padding-top","0"),b.settings.scrolltop&&c.scrollTo(0,0)):f.hasClass("fixed")&&(f.parent().addClass("fixed"),f.removeClass("fixed"),a("body").css("padding-top",d))}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(c){if(!b.breakpoint()){var d=a(this),e=a(c.target),f=d.closest("[data-topbar], .top-bar");f.data("topbar"),(!b.settings.is_hover||Modernizr.touch)&&(c.stopImmediatePropagation(),"A"===e[0].nodeName&&e.parent().hasClass("has-dropdown")&&c.preventDefault(),d.hasClass("hover")?d.removeClass("hover").find("li").removeClass("hover"):d.addClass("hover"))}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(c){if(b.breakpoint()){c.preventDefault();var d=a(this),e=d.closest(".top-bar, [data-topbar]"),f=e.find("section, .section"),g=e.children("ul").first(),h=(d.next(".dropdown").outerHeight(),d.closest("li"));e.data("index",e.data("index")+1),h.addClass("moved"),b.rtl?(f.css({right:-(100*e.data("index"))+"%"}),f.find(">.name").css({right:100*e.data("index")+"%"})):(f.css({left:-(100*e.data("index"))+"%"}),f.find(">.name").css({left:100*e.data("index")+"%"})),e.css("height",b.outerHeight(d.siblings("ul"),!0)+b.height(g))}}),a(c).on("resize.fndtn.topbar",function(){b.breakpoint()||a(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover")}.bind(this)),a("body").on("click.fndtn.topbar",function(b){var c=a(b.target).closest("[data-topbar], .top-bar");c.length>0||a(".top-bar li, [data-topbar] li").removeClass("hover")}),a(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(c){c.preventDefault();var d=a(this),e=d.closest(".top-bar, [data-topbar]"),f=e.children("ul").first(),g=e.find("section, .section"),h=d.closest("li.moved"),i=h.parent();e.data("index",e.data("index")-1),b.rtl?(g.css({right:-(100*e.data("index"))+"%"}),g.find(">.name").css({right:100*e.data("index")+"%"})):(g.css({left:-(100*e.data("index"))+"%"}),g.find(">.name").css({left:100*e.data("index")+"%"})),0===e.data("index")?e.css("height",""):e.css("height",b.outerHeight(i,!0)+b.height(f)),setTimeout(function(){h.removeClass("moved")},300)})},breakpoint:function(){return a(d).width()<=this.settings.breakPoint||a("html").hasClass("lt-ie9")},assemble:function(){var b=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var c=a(this),d=c.siblings(".dropdown"),e=c.attr("href");if(b.settings.mobile_show_parent_link&&e&&e.length>1)var f=a('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+e+'">'+c.text()+"</a></li>");else var f=a('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');1==b.settings.custom_back_text?f.find("h5>a").html("&laquo; "+b.settings.back_text):f.find("h5>a").html("&laquo; "+c.html()),d.prepend(f)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(b){var c=0,d=this;return b.find("> li").each(function(){c+=d.outerHeight(a(this),!0)}),c},sticky:function(){var b="."+this.settings.stickyClass;if(a(b).length>0){var d,e=a(b).length?a(b).offset().top:0,f=a(c),g=this.outerHeight(a(".top-bar"));a(c).resize(function(){clearTimeout(d),d=setTimeout(function(){e=a(b).offset().top},105)}),f.scroll(function(){f.scrollTop()>e?(a(b).addClass("fixed"),a("body").css("padding-top",g)):f.scrollTop()<=e&&(a(b).removeClass("fixed"),a("body").css("padding-top","0"))})}},off:function(){a(this.scope).off(".fndtn.topbar"),a(c).off(".fndtn.topbar")},reflow:function(){}}}(b.zj,this,this.document)});
